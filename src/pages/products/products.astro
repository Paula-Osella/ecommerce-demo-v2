---
import Header from "../../layouts/Header.astro";
import Footer from "../../layouts/Footer.astro";
import MainLayout from "../../layouts/MainLayout.astro"; 

const productCategories = [
  { id: "antiedad",          label: "Antiedad",             image: "/Product_Carrousel/Product_Carrousel_1.webp" },
  { id: "limpiadores",       label: "Limpiadores",          image: "/Product_Carrousel/Product_Carrousel_1.webp" },
  { id: "hiperpigmentacion", label: "Hiperpigmentación",    image: "/Product_Carrousel/Product_Carrousel_1.webp" },
  { id: "hidratantes",       label: "Hidratantes",          image: "/Product_Carrousel/Product_Carrousel_1.webp" },
  { id: "otros",             label: "Otros",                image: "/Product_Carrousel/Product_Carrousel_1.webp" },
  { id: "proteccion-solar",  label: "Protección solar",     image: "/Product_Carrousel/Product_Carrousel_1.webp" },
  { id: "acne",              label: "Acné",                 image: "/Product_Carrousel/Product_Carrousel_1.webp" },
];
---

<main title="Productos | Demo e-commerce">
  <Header />
  {/* TÍTULO IGUAL AL SITIO DE REFERENCIA */}
  <section class="max-w-6xl mx-auto pt-16 pb-4 px-4">
    <h1 class="text-3xl md:text-4xl font-semibold text-left">
      Categoría de productos
    </h1>
  </section>

  {/* CARRUSEL DE CATEGORÍAS (SOLO CATEGORÍAS, SIN PRODUCTOS) */}
  <section class="max-w-6xl mx-auto pb-20 px-4">
    <div class="relative">
      {/* Flecha izquierda */}
      <button
        type="button"
        id="cat-prev"
        class="hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10
               w-9 h-9 rounded-full bg-pink-700 text-white items-center justify-center shadow-md
               hover:bg-pink-800 transition-colors"
        aria-label="Ver categorías anteriores"
      >
        ‹
      </button>

      {/* Track con overflow-x pero SIN barra visible */}
      <div
        id="cat-track"
        class="products-cat-track flex gap-16 overflow-x-auto scroll-smooth px-10 py-6"
      >
        {productCategories.map((cat) => (
          <a
            href={`/products/${cat.id}`}
            class="group inline-flex flex-col items-center gap-6 shrink-0 w-52 md:w-60"
          >
            <div class="category-card-image w-full aspect-[3/4] flex items-center justify-center overflow-hidden">
              <img
                src={cat.image}
                alt={cat.label}
                class="h-full w-auto object-contain"
                loading="lazy"
              />
            </div>
            <span class="text-sm md:text-base font-medium text-zinc-900 group-hover:text-pink-700 transition-colors">
              {cat.label}
            </span>
          </a>
        ))}
      </div>

      {/* Flecha derecha */}
      <button
        type="button"
        id="cat-next"
        class="hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10
               w-9 h-9 rounded-full bg-pink-700 text-white items-center justify-center shadow-md
               hover:bg-pink-800 transition-colors"
        aria-label="Ver más categorías"
      >
        ›
      </button>
    </div>
  </section>

  <Footer />
</main>

<style>
    /* Ocultar barra de scroll como en el sitio original */
    .products-cat-track {
      scrollbar-width: none; /* Firefox */
    }
    .products-cat-track::-webkit-scrollbar {
      display: none;         /* Chrome, Edge, Safari */
    }

    /* Zoom suave al pasar el cursor por la categoría */
    .category-card-image img {
      transition: transform 0.35s ease;
      transform-origin: center;
    }

    .group:hover .category-card-image img {
      transform: scale(1.06);
    }
  </style>

  <script>
    if (typeof window !== "undefined") {
      const track = document.getElementById("cat-track");
      const prev = document.getElementById("cat-prev");
      const next = document.getElementById("cat-next");

      if (track && prev && next) {
        // Paso aproximado: el ancho de dos tarjetas
        const STEP = 260 * 2;

        prev.addEventListener("click", () => {
          track.scrollBy({ left: -STEP, behavior: "smooth" });
        });

        next.addEventListener("click", () => {
          track.scrollBy({ left: STEP, behavior: "smooth" });
        });
      }
    }
  </script>
